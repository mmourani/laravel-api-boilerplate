[program:laravel-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /home/forge/your-site.com/artisan queue:work redis --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=forge
numprocs=2
redirect_stderr=true
stdout_logfile=/home/forge/your-site.com/storage/logs/worker.log
stopwaitsecs=3600
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=10

; Dedicated email queue worker
[program:laravel-email-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /home/forge/your-site.com/artisan queue:work redis --queue=emails --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=forge
numprocs=1
redirect_stderr=true
stdout_logfile=/home/forge/your-site.com/storage/logs/email-worker.log
stopwaitsecs=3600
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=5

; High-priority queue worker
[program:laravel-priority-worker]
process_name=%(program_name)s_%(process_num)02d
command=php /home/forge/your-site.com/artisan queue:work redis --queue=high,default --sleep=3 --tries=3 --max-time=3600
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
user=forge
numprocs=1
redirect_stderr=true
stdout_logfile=/home/forge/your-site.com/storage/logs/priority-worker.log
stopwaitsecs=3600
stdout_logfile_maxbytes=5MB
stdout_logfile_backups=5

; Group all workers under a single group for easier management
[group:laravel-workers]
programs=laravel-worker,laravel-email-worker,laravel-priority-worker
priority=999

